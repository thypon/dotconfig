#!/bin/sh

TOPLEVELDIR=$(git rev-parse --show-toplevel)

GITCONFIG_EXCLUDE=""
[ -f "$HOME/.gitconfig" ] && GITCONFIG_EXCLUDE="--exclude=.gitconfig"

if [ "$(uname -s)" != "Darwin" ]; then
	rsync -avp $GITCONFIG_EXCLUDE $TOPLEVELDIR/common/ $HOME/
	rsync -avp $GITCONFIG_EXCLUDE $TOPLEVELDIR/ossnix/ $HOME/
else
	rsync -avp $GITCONFIG_EXCLUDE $TOPLEVELDIR/common/ $HOME/
	[ -d "$TOPLEVELDIR/macos/" ] && rsync -avp $GITCONFIG_EXCLUDE $TOPLEVELDIR/macos/ $HOME/
fi
